<script type="text/javascript" src="<iz:insert:url/>libs/ckeditor/ckeditor.js"></script>
<script type="text/javascript" src="<iz:insert:url/>libs/ckeditor/ckeditor_ext.js"></script>
<script type="text/javascript">
Ext.require([
    'Ext.form.*',
    'Ext.window.*'
]);

Ext.onReady(function(){
	Ext.QuickTips.init();
    Ext.form.Field.prototype.msgTarget = 'side';
	var form = new Ext.FormPanel({
        defaultType: 'textfield',
        id: "articleform",
		frame:true,
		border: false,
        items: [
            {
                fieldLabel: "Title",
            }
			,{
                fieldLabel: "Content",
				xtype: "ckeditor",
				CKConfig: {
					//customConfig : '<iz:insert:url/>libs/ckeditor/config.js', 
					toolbar: 'Full',
					filebrowserBrowseUrl : '<iz:insert:url/>libs/ajaxfilemanager/ajaxfilemanager.php',
					//filebrowserUploadUrl : '<iz:insert:url/>libs/ajaxfilemanager/ajaxfilemanager.php',
					skin: 'kama',
					baseHref : "<iz:insert:url/>"
				},
				height: 500,
				width: 800,
                value: "hoi"
            }
        ],
		buttons: [{
		    text: "Save",
		    type: 'submit',
			scope: this,
			handler: function() {
		        form.submit({ 
	                method: 'POST', 
	                url: '<iz:insert:url/><iz:insert:config path="root.url_json"/>article/saveArticle', 
	                success: function(f, a) {
						alert(a.result.message);
						window.location.href = '<iz:insert:uri/>article/listArticle';
	                },             
	                failure: function(f, a) {  
	                    //f.markInvalid(a.result.errors);
						alert(a.result.message);
	                }             
	            })
		    }
		}]
	});
	form.render('articlePanel');
})
</script>

<div id="articlePanel">
	
</div>
<br/>
<div id="articleGrid"></div>