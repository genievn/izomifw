attributes:
    type: ExtGridPanel
    title: Danh mục các quyền
    autoExpandColumn: title
    pageSize: 20
    cm: "[{id: 'title', header: 'Tên quyền', dataIndex: 'title'},{header: 'Lớp', dataIndex: 'action_module'},{header: 'Hàm', dataIndex: 'action_method'},{header: 'Tham số', dataIndex: 'action_params'}]"
    lm: "Đang tải ... xin vui lòng đơi!"
    tbar:
        create:
            text: Thêm mới
            iconCls: IconManager.getIcon('add')
            handler: |
                function()
                {
                    var jsloader = new Ext.ux.JSLoader({
                        url: '<iz:insert:url/><iz:insert:config path="root.response.plain"/>form/create/Entities.Base.Action/',
                        closable: 1,
                        waitMsg: 'Đang tải dữ liệu ...',
                        onLoad:function(comp, options){}
                    });
                }
        delete:
            text: Xóa
            iconCls: IconManager.getIcon('delete')
            handler: |
                function()
                {
                    //console.log(this);
                    var grid = this.ownerCt.ownerCt;
                    Ext.MessageBox.confirm(
                        'Xác nhận',
                        'Bạn có chắc chắn không?',
                        function(btn, text) {
                            
                            if (btn=='yes') {
                                AlertBox.show('Kết nối hệ thống', 'Đang kết nối xử lý dữ liệu', 'loading', {timeout: 3});   
                                var recordSelModel = grid.getSelectionModel();
                                var recordCount = recordSelModel.getCount();
                                var recordArray = new Array();
                                
                                if (recordCount > 0) {
                                    var records = recordSelModel.getSelections();
                                    for (var i=0;i<recordCount;i++) {
                                        recordArray[i] = records[i].get('id');
                                    }
                                }
                                
                                
                                Ext.Ajax.request({
                                    url: '<iz:insert:url/><iz:insert:config path="root.response.json"/>form/delete/Entities.Base.Action/',
                                    method: 'POST',
                                    params: {
                                        ids: Ext.encode(recordArray)
                                    },
                                    success: function(){                                        
                                        grid.store.reload();
                                    },
                                    scope: this
                                });
                            }
                        }
                    );
                }
        manage_roles:
            text: Roles
            iconCls: IconManager.getIcon('lock_key')
            handler: |
                function()
                {
                    var jsloader = new Ext.ux.JSLoader({
                        url: '<iz:insert:url/><iz:insert:config path="root.response.plain"/>form/grid/Entities.Base.Role/',
                        closable: 1,
                        waitMsg: 'Đang tải dữ liệu ...',
                        onLoad:function(comp, options){}
                    });
                }
    plugins:
        filters: "{type: 'string',  dataIndex: 'title'}"
        rowcontext:
            edit:
                text: 'Sửa thông tin'
                icon: '/extra/shared/icons/bullet_edit.png'
                getDisabled: |
                    function(grid, ri, e, rec){
                        return false;
                    }
                beforeAdd: |
                    function(grid, ri, e, rec){
                        return true;
                    }
                handler: |
                    function(item,event,record,grid,ri)
                    {
                        var jsloader = new Ext.ux.JSLoader({
                            url: '<iz:insert:url/><iz:insert:config path="root.response.plain"/>form/edit/Entities.Base.Account/' + record.data.id + '/',
                            params:{lang: IZOMI.lang, id: record.data.id},
                            closable: 1,
                            waitMsg: 'Đang tải dữ liệu ...',
                            onLoad:function(comp, options){}
                        });
                    }
    ds:
        type: "ExtGroupingStore"
        autoLoad: "{params:{start:0, limit:20}}"
        url: "/<iz:insert:config path=\"root.response.json\"/>form/retrieve/Entities.Base.Action/"
        reader:
            type: "ExtJsonReader"
            idProperty: "id"
            totalProperty: "meta.total"
            root: "data"
            record: "['id','action_module','action_method','action_params','default_lang',{name:'title',mapping:'translations[0].title'}]"
        sortInfo: "{field: 'action_module', direction: 'ASC'}"
        remoteSort: 
